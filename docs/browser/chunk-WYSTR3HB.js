import{c as V,d as L}from"./chunk-ZSNUJC6Q.js";import{a as M,m as $}from"./chunk-CKPWLBRE.js";import{i as O}from"./chunk-NSWKUIGL.js";import"./chunk-2OV63D57.js";import{l as F}from"./chunk-5X2HJEGI.js";import{$a as g,Bb as C,Cb as _,Jb as c,Kb as d,Lb as b,Mb as A,Oa as E,Ra as n,Rb as w,Sb as B,Wb as s,Xb as p,Yb as T,_ as h,a as S,b as I,eb as k,fa as f,ga as v,kb as x,ob as y,qb as R,rb as D,sb as r,tb as a,ub as m,xb as P}from"./chunk-ZU635JQC.js";var N=()=>[],G=i=>["/orders",i],Q=(i,e)=>e.product._id;function z(i,e){if(i&1&&(r(0,"p",4),c(1),s(2,"translate"),s(3,"currency"),a()),i&2){let t=_();n(),A("",p(2,2,"CART.TOTAL_PRICE")," : ",T(3,4,t.cartDetails.totalCartPrice,"GBP")," ")}}function H(i,e){i&1&&(r(0,"p",4),c(1),s(2,"translate"),a()),i&2&&(n(),b("",p(2,1,"CART.TOTAL_PRICE")," : 0 EGP "))}function K(i,e){if(i&1){let t=P();r(0,"div",5)(1,"div",8),m(2,"img",9),a(),r(3,"div",10)(4,"div")(5,"h3",11),c(6),a(),r(7,"p"),c(8),s(9,"translate"),r(10,"span",4),c(11),s(12,"currency"),a()(),r(13,"button",12),C("click",function(){let l=f(t).$implicit,u=_();return v(u.removeItem(l.product._id))}),m(14,"i",13),c(15),s(16,"translate"),a()(),r(17,"div",14)(18,"span",15),C("click",function(){let l=f(t).$implicit,u=_();return v(u.updateCount(l.product._id,l.count+1))}),m(19,"i",16),a(),r(20,"span"),c(21),a(),r(22,"span",17),C("click",function(){let l=f(t).$implicit,u=_();return v(u.updateCount(l.product._id,l.count-1))}),m(23,"i",18),a()()(),m(24,"hr",19),a()}if(i&2){let t=e.$implicit;n(2),x("src",t.product.imageCover,E)("alt",t.product.title),n(4),d(t.product.title),n(2),b("",p(9,7,"CART.PRICE")," : "),n(3),d(T(12,9,t.price,"GBP")),n(4),b(" ",p(16,12,"CART.REMOVE")," "),n(6),d(t.count)}}function U(i,e){i&1&&(r(0,"p",6),c(1),s(2,"translate"),a()),i&2&&(n(),d(p(2,1,"CART.EMPTY")))}var j=class i{_CartService=h(M);_ToastrService=h($);cartDetails={};resetCart(){return I(S({},this.cartDetails),{products:[],totalCartPrice:0})}ngOnInit(){this._CartService.getProductsCart().subscribe({next:e=>{this.cartDetails=e.data}})}removeItem(e){this._CartService.deleteProductFromCart(e).subscribe({next:t=>{this.cartDetails=t.data,this._ToastrService.success("product removed","Fresh Cart"),this._CartService.cartNumber.set(t.numOfCartItems)}})}updateCount(e,t){t>0&&this._CartService.updateProductQuantity(e,t).subscribe({next:o=>{this.cartDetails=o.data,this._ToastrService.success("Quantity updated","Fresh Cart")}})}clearCart(){this._CartService.clearCart().subscribe({next:e=>{console.log(e),e.message=="success"&&(this.cartDetails=this.resetCart(),this._ToastrService.success("Cart Deleted","Fresh Cart")),this._CartService.cartNumber.set(e.numOfCartItems)}})}check(){return this.cartDetails?.products?.length===0}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["app-cart"]],decls:16,vars:17,consts:[[1,"bg-main-light","shadow","rounded-4","p-4","my-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"btn","btn-outline-danger","btn-samll",3,"click","disabled"],[1,"text-main"],[1,"row"],[1,"text-danger"],[1,"btn-main","mt-2",3,"disabled","routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h5"],[1,"cr","btn","m-0","p-0",3,"click"],[1,"text-main","fa-solid","fa-trash-can"],[1,"d-flex","justify-content-center","align-items-center"],[1,"border","text-main","me-2","p-1","cr","rounded-1",3,"click"],[1,"fa-solid","fa-plus"],[1,"border","text-main","p-1","ms-2","cr","rounded-1",3,"click"],[1,"fa-solid","fa-minus"],[1,"m-1"]],template:function(t,o){t&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),c(3),s(4,"translate"),a(),r(5,"button",3),C("click",function(){return o.clearCart()}),c(6),s(7,"translate"),a()(),k(8,z,4,7,"p",4)(9,H,3,3,"p",4),R(10,K,25,14,"div",5,Q,!1,U,3,3,"p",6),r(13,"button",7),c(14),s(15,"translate"),a()()),t&2&&(n(3),d(p(4,8,"CART.SHOP_CART")),n(2),x("disabled",o.check()),n(),d(p(7,10,"CART.CLEAR_CART")),n(2),y(o.cartDetails.products!=w(14,N)?8:9),n(2),D(o.cartDetails.products),n(3),x("disabled",o.check())("routerLink",B(15,G,o.cartDetails._id)),n(),d(p(15,12,"CART.MAKE_ORDER")))},dependencies:[F,O,L,V],encapsulation:2})};export{j as CartComponent};
