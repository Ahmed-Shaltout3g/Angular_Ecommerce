import{a as P}from"./chunk-SKN7AQPH.js";import{a as h,b as u,c as S,d as y,f as b,g as T,h as R,i as V,k as q}from"./chunk-HVDZ737I.js";import{h as E}from"./chunk-NSWKUIGL.js";import"./chunk-2OV63D57.js";import"./chunk-5X2HJEGI.js";import{$a as F,Bb as x,Cb as p,Jb as l,Kb as w,Ra as a,_ as C,eb as m,fa as f,ga as g,kb as c,ob as d,sb as r,tb as n,ub as _,xb as v}from"./chunk-ZU635JQC.js";function N(t,o){if(t&1&&(r(0,"div",3),l(1),n()),t&2){let e=p(2);a(),w(e.messageErorr)}}function G(t,o){t&1&&(r(0,"p",10),l(1," - Email is Required"),n())}function A(t,o){t&1&&(r(0,"p",10),l(1," - Email must be valid "),n())}function D(t,o){if(t&1&&(r(0,"div",7),m(1,G,2,0,"p",10)(2,A,2,0,"p",10),n()),t&2){let e,i=p(2);a(),d((e=i.verifyForm.get("email"))!=null&&e.getError("required")&&((e=i.verifyForm.get("email"))!=null&&e.touched)?1:(e=i.verifyForm.get("email"))!=null&&e.getError("email")?2:-1)}}function B(t,o){t&1&&_(0,"span",9)}function I(t,o){if(t&1){let e=v();r(0,"form",1),x("ngSubmit",function(){f(e);let s=p();return g(s.verifyEmailSubmit())}),r(1,"h1",2),l(2,"Forget Password :"),n(),m(3,N,2,1,"div",3),r(4,"div",4)(5,"label",5),l(6,"Email"),n(),_(7,"input",6),m(8,D,3,1,"div",7),n(),r(9,"button",8),l(10,"Verify Email "),m(11,B,1,0,"span",9),n()()}if(t&2){let e,i=p();c("formGroup",i.verifyForm),a(3),d(i.messageErorr?3:-1),a(5),d((e=i.verifyForm.get("email"))!=null&&e.errors&&((e=i.verifyForm.get("email"))!=null&&e.touched||(e=i.verifyForm.get("email"))!=null&&e.dirty)?8:-1),a(),c("disabled",i.verifyForm.invalid),a(2),d(i.isLoading?11:-1)}}function H(t,o){if(t&1&&(r(0,"div",3),l(1),n()),t&2){let e=p(2);a(),w(e.messageErorr)}}function M(t,o){t&1&&(r(0,"p",10),l(1," - Rest Code is Required"),n())}function k(t,o){t&1&&(r(0,"p",10),l(1," - Reset Code must be 6 "),n())}function $(t,o){if(t&1&&(r(0,"div",7),m(1,M,2,0,"p",10)(2,k,2,0,"p",10),n()),t&2){let e,i=p(2);a(),d((e=i.verifyCodeForm.get("resetCode"))!=null&&e.getError("required")&&((e=i.verifyCodeForm.get("resetCode"))!=null&&e.touched)?1:(e=i.verifyCodeForm.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function j(t,o){t&1&&_(0,"span",9)}function U(t,o){if(t&1){let e=v();r(0,"form",1),x("ngSubmit",function(){f(e);let s=p();return g(s.verifyCodeSubmit())}),r(1,"h1",2),l(2,"Rest Code :"),n(),m(3,H,2,1,"div",3),r(4,"div",4)(5,"label",11),l(6,"Code"),n(),_(7,"input",12),m(8,$,3,1,"div",7),n(),r(9,"button",8),l(10,"Reset Code "),m(11,j,1,0,"span",9),n()()}if(t&2){let e,i=p();c("formGroup",i.verifyCodeForm),a(3),d(i.messageErorr?3:-1),a(5),d((e=i.verifyCodeForm.get("resetCode"))!=null&&e.errors&&((e=i.verifyCodeForm.get("resetCode"))!=null&&e.touched||(e=i.verifyCodeForm.get("resetCode"))!=null&&e.dirty)?8:-1),a(),c("disabled",i.verifyCodeForm.invalid),a(2),d(i.isLoading?11:-1)}}function z(t,o){if(t&1&&(r(0,"div",3),l(1),n()),t&2){let e=p(2);a(),w(e.messageErorr)}}function J(t,o){t&1&&(r(0,"p",10),l(1," - Email is Required"),n())}function K(t,o){t&1&&(r(0,"p",10),l(1," - Email must be valid "),n())}function O(t,o){if(t&1&&(r(0,"div",7),m(1,J,2,0,"p",10)(2,K,2,0,"p",10),n()),t&2){let e,i=p(2);a(),d((e=i.restPasswordForm.get("email"))!=null&&e.getError("required")&&((e=i.restPasswordForm.get("email"))!=null&&e.touched)?1:(e=i.restPasswordForm.get("email"))!=null&&e.getError("email")?2:-1)}}function Q(t,o){t&1&&(r(0,"p",10),l(1," - Password is Required"),n())}function W(t,o){t&1&&(r(0,"p",10),l(1," - New Password Should be more than or equal 8 chars"),n())}function X(t,o){if(t&1&&(r(0,"div",7),m(1,Q,2,0,"p",10)(2,W,2,0,"p",10),n()),t&2){let e,i=p(2);a(),d((e=i.restPasswordForm.get("newPassword"))!=null&&e.getError("required")?1:(e=i.restPasswordForm.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function Y(t,o){t&1&&_(0,"span",9)}function Z(t,o){if(t&1){let e=v();r(0,"form",1),x("ngSubmit",function(){f(e);let s=p();return g(s.resetPasswordSubmit())}),r(1,"h1",2),l(2,"Rest Password :"),n(),m(3,z,2,1,"div",3),r(4,"div",4)(5,"label",5),l(6,"Email"),n(),_(7,"input",13),m(8,O,3,1,"div",7),n(),r(9,"div",4)(10,"label",14),l(11,"Password"),n(),_(12,"input",15),n(),m(13,X,3,1,"div",7),r(14,"button",8),l(15,"Rest Password "),m(16,Y,1,0,"span",9),n()()}if(t&2){let e,i,s=p();c("formGroup",s.restPasswordForm),a(3),d(s.messageErorr?3:-1),a(5),d((e=s.restPasswordForm.get("email"))!=null&&e.errors&&((e=s.restPasswordForm.get("email"))!=null&&e.touched||(e=s.restPasswordForm.get("email"))!=null&&e.dirty)?8:-1),a(5),d((i=s.restPasswordForm.get("newPassword"))!=null&&i.errors&&((i=s.restPasswordForm.get("newPassword"))!=null&&i.touched||(i=s.restPasswordForm.get("newPassword"))!=null&&i.dirty)?13:-1),a(),c("disabled",s.restPasswordForm.invalid),a(2),d(s.isLoading?16:-1)}}var L=class t{messageErorr="";isLoading=!1;step=1;_FormBuilder=C(V);_AuthService=C(P);_Router=C(E);verifyForm=this._FormBuilder.group({email:[null,[u.required,u.email]]});verifyCodeForm=this._FormBuilder.group({resetCode:[null,[u.required,u.pattern(/^\w{6}$/)]]});restPasswordForm=this._FormBuilder.group({email:[null,[u.required,u.email]],newPassword:[null,[u.required,u.pattern(/^\w{8,}$/)]]});verifyEmailSubmit(){let o=this.verifyForm.get("email")?.value;this.restPasswordForm.get("email")?.patchValue(o),this.isLoading=!0,this._AuthService.setEmailVerify(this.verifyForm.value).subscribe({next:e=>{this.isLoading=!1,e.statusMsg==="success"&&(this.step=2)},error:e=>{this.messageErorr=e.error.message,this.isLoading=!1}})}verifyCodeSubmit(){this.isLoading=!0,console.log(this.verifyCodeForm.value),this._AuthService.setCodeVerify(this.verifyCodeForm.value).subscribe({next:o=>{this.isLoading=!1,o.status==="Success"&&(this.step=3)},error:o=>{this.messageErorr=o.error.message,this.isLoading=!1}})}resetPasswordSubmit(){this.isLoading=!0,this._AuthService.setResetPassword(this.restPasswordForm.value).subscribe({next:o=>{this.isLoading=!1,localStorage.setItem("userData",o.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:o=>{this.messageErorr=o.error.message,this.isLoading=!1}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-forget-password"]],decls:4,vars:1,consts:[[1,"shadow","bg-main-light","p-3","rounded-4",3,"formGroup"],[1,"shadow","bg-main-light","p-3","rounded-4",3,"ngSubmit","formGroup"],[1,"h2","text-main","mb-3"],[1,"alert","alert-danger"],[1,"my-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],[1,"ps-2"],["type","submit",1,"btn-main","d-block","ms-auto","mt-4",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],[1,"text-danger"],["for","resetCode"],["formControlName","resetCode","id","resetCode","type","text",1,"form-control"],["readonly","","formControlName","email","id","email","type","email",1,"form-control"],["for","password"],["formControlName","newPassword","id","password","type","password",1,"form-control"]],template:function(e,i){e&1&&(r(0,"section"),m(1,I,12,5,"form",0)(2,U,12,5,"form",0)(3,Z,17,6,"form",0),n()),e&2&&(a(),d(i.step==1?1:i.step==2?2:i.step==3?3:-1))},dependencies:[q,b,h,S,y,T,R],encapsulation:2})};export{L as ForgetPasswordComponent};
