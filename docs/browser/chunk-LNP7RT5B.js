import{a as R}from"./chunk-SKN7AQPH.js";import{a as T,b as v,c as N,d as q,f as A,g as D,h as j,i as k,k as w}from"./chunk-HVDZ737I.js";import{f as E,h as I}from"./chunk-NSWKUIGL.js";import{a as C}from"./chunk-2OV63D57.js";import{s as O}from"./chunk-5X2HJEGI.js";import{$a as b,Bb as x,Cb as _,Jb as a,Kb as S,Ra as l,U as h,Z as y,_ as c,eb as m,kb as F,ob as d,sb as o,tb as r,ub as f}from"./chunk-ZU635JQC.js";var g=class e{constructor(i){this._HttpClient=i}checkOut(i,t){return this._HttpClient.post(`${C.baseURL}/api/v1/orders/checkout-session/${i}?url=${C.URLServer}`,{shippingAddress:t})}static \u0275fac=function(t){return new(t||e)(y(O))};static \u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})};function H(e,i){if(e&1&&(o(0,"div",3),a(1),r()),e&2){let t=_();l(),S(t.messageErorr)}}function L(e,i){e&1&&(o(0,"p",14),a(1," - details is Required"),r())}function M(e,i){if(e&1&&(o(0,"div",7),m(1,L,2,0,"p",14),r()),e&2){let t,n=_();l(),d((t=n.ordersForm.get("details"))!=null&&t.getError("required")?1:-1)}}function B(e,i){e&1&&(o(0,"p",14),a(1," - City is Required"),r())}function $(e,i){if(e&1&&(o(0,"div",7),m(1,B,2,0,"p",14),r()),e&2){let t,n=_();l(),d((t=n.ordersForm.get("city"))!=null&&t.getError("required")&&((t=n.ordersForm.get("city"))!=null&&t.touched)?1:-1)}}function V(e,i){e&1&&(o(0,"p",14),a(1," - Phone is Required"),r())}function U(e,i){e&1&&(o(0,"p",14),a(1," - Phone must be Egyption number"),r())}function z(e,i){if(e&1&&(o(0,"div",7),m(1,V,2,0,"p",14)(2,U,2,0,"p",14),r()),e&2){let t,n=_();l(),d((t=n.ordersForm.get("phone"))!=null&&t.getError("required")?1:(t=n.ordersForm.get("phone"))!=null&&t.getError("pattern")?2:-1)}}function J(e,i){e&1&&f(0,"span",13)}var G=class e{messageErorr="";isLoading=!1;_AuthService=c(R);_FormBuilder=c(k);_Router=c(I);_ActivatedRoute=c(E);_OrderService=c(g);cartId="";ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:i=>{this.cartId=i.get("id")}})}ordersForm=this._FormBuilder.group({details:[null,[v.required]],city:[null,[v.required]],phone:[null,[v.required,v.pattern(/^01[0125][0-9]{8}$/)]]});submitordersForm(){this._OrderService.checkOut(this.cartId,this.ordersForm.value).subscribe({next:i=>{console.log(i),i.status=="success"&&window.open(i.session.url,"_self")},error:i=>{console.log(i)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-orders"]],decls:23,vars:6,consts:[[1,"bg-main-light","shadow","p-3","my-4","rounded-4"],[3,"ngSubmit","formGroup"],[1,"h2","text-main","mb-3"],[1,"alert","alert-danger"],[1,"my-2"],["for","details"],["formControlName","details","name","details","id","details",1,"form-control"],[1,"ps-2"],["for","city"],["formControlName","city","id","city","type","text",1,"form-control"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control"],["type","submit",1,"btn-main","d-block","ms-auto"],[1,"fas","fa-spin","fa-spinner"],[1,"text-danger"]],template:function(t,n){if(t&1&&(o(0,"section",0)(1,"form",1),x("ngSubmit",function(){return n.submitordersForm()}),o(2,"h1",2),a(3,"Shipping Address :"),r(),m(4,H,2,1,"div",3),o(5,"div",4)(6,"label",5),a(7,"Details"),r(),f(8,"textarea",6),r(),m(9,M,2,1,"div",7),o(10,"div",4)(11,"label",8),a(12,"City"),r(),f(13,"input",9),m(14,$,2,1,"div",7),r(),o(15,"div",4)(16,"label",10),a(17,"Phone"),r(),f(18,"input",11),r(),m(19,z,3,1,"div",7),o(20,"button",12),a(21,"Check Out "),m(22,J,1,0,"span",13),r()()()),t&2){let s,p,u;l(),F("formGroup",n.ordersForm),l(3),d(n.messageErorr?4:-1),l(5),d((s=n.ordersForm.get("details"))!=null&&s.errors&&((s=n.ordersForm.get("details"))!=null&&s.touched||(s=n.ordersForm.get("details"))!=null&&s.dirty)?9:-1),l(5),d((p=n.ordersForm.get("city"))!=null&&p.errors&&((p=n.ordersForm.get("city"))!=null&&p.touched||(p=n.ordersForm.get("city"))!=null&&p.dirty)?14:-1),l(5),d((u=n.ordersForm.get("phone"))!=null&&u.errors&&((u=n.ordersForm.get("phone"))!=null&&u.touched||(u=n.ordersForm.get("phone"))!=null&&u.dirty)?19:-1),l(3),d(n.isLoading?22:-1)}},dependencies:[w,A,T,N,q,D,j],encapsulation:2})};export{G as OrdersComponent};
