import{a as h}from"./chunk-SKN7AQPH.js";import{a as b,b as f,c as A,d as R,f as G,g as y,h as O,i as D,k as w}from"./chunk-HVDZ737I.js";import{c as N,d as T}from"./chunk-ZSNUJC6Q.js";import{h as F,i as I}from"./chunk-NSWKUIGL.js";import"./chunk-2OV63D57.js";import"./chunk-5X2HJEGI.js";import{$a as E,Bb as S,Cb as L,Jb as r,Kb as c,Lb as _,Ra as i,Wb as m,Xb as p,_ as v,eb as d,kb as x,ob as u,sb as a,tb as o,ub as C}from"./chunk-ZU635JQC.js";function P(e,l){if(e&1&&(a(0,"div",3),r(1),o()),e&2){let t=L();i(),c(t.messageErorr)}}function M(e,l){e&1&&(a(0,"p",14),r(1),m(2,"translate"),o()),e&2&&(i(),_("- ",p(2,1,"LOGIN.EMAIL_REQUIRED"),""))}function k(e,l){e&1&&(a(0,"p",14),r(1),m(2,"translate"),o()),e&2&&(i(),_("- ",p(2,1,"LOGIN.EMAIL_INVALID"),""))}function q(e,l){if(e&1&&(a(0,"div",7),d(1,M,3,3,"p",14)(2,k,3,3,"p",14),o()),e&2){let t,n=L();i(),u((t=n.loginForm.get("email"))!=null&&t.getError("required")&&((t=n.loginForm.get("email"))!=null&&t.touched)?1:(t=n.loginForm.get("email"))!=null&&t.getError("email")?2:-1)}}function U(e,l){e&1&&(a(0,"p",14),r(1),m(2,"translate"),o()),e&2&&(i(),_("- ",p(2,1,"LOGIN.PASSWORD_REQUIRED"),""))}function V(e,l){e&1&&(a(0,"p",14),r(1),m(2,"translate"),o()),e&2&&(i(),_("- ",p(2,1,"LOGIN.PASSWORD_PATTERN"),""))}function W(e,l){if(e&1&&(a(0,"div",7),d(1,U,3,3,"p",14)(2,V,3,3,"p",14),o()),e&2){let t,n=L();i(),u((t=n.loginForm.get("password"))!=null&&t.getError("required")?1:(t=n.loginForm.get("password"))!=null&&t.getError("pattern")?2:-1)}}function j(e,l){e&1&&C(0,"span",13)}var B=class e{messageErorr="";isLoading=!1;_AuthService=v(h);_FormBuilder=v(D);_Router=v(F);loginForm=this._FormBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{8,}$/)]]});submitLoginForm(){this.isLoading=!0,this.loginForm.valid?this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:l=>{this.isLoading=!1,l.message=="success"&&(localStorage.setItem("userData",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]))},error:l=>{this.messageErorr=l.error.message,this.isLoading=!1}}):(this.isLoading=!1,this.loginForm.markAllAsTouched())}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=E({type:e,selectors:[["app-login"]],decls:26,vars:20,consts:[[1,"bg-main-light","shadow","p-3","my-4","rounded-4"],[3,"ngSubmit","formGroup"],[1,"h2","text-main","mb-3"],[1,"alert","alert-danger"],[1,"my-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],[1,"ps-2"],["for","password"],["formControlName","password","id","password","type","password",1,"form-control"],[1,"d-flex","justify-content-end","align-items-center","g-4"],["routerLink","/forgetPass",1,"link-info","cr"],["type","submit",1,"btn-main","d-block","ms-auto"],[1,"fas","fa-spin","fa-spinner"],[1,"text-danger"]],template:function(t,n){if(t&1&&(a(0,"section",0)(1,"form",1),S("ngSubmit",function(){return n.submitLoginForm()}),a(2,"h1",2),r(3),m(4,"translate"),o(),d(5,P,2,1,"div",3),a(6,"div",4)(7,"label",5),r(8),m(9,"translate"),o(),C(10,"input",6),d(11,q,3,1,"div",7),o(),a(12,"div",4)(13,"label",8),r(14),m(15,"translate"),o(),C(16,"input",9),o(),d(17,W,3,1,"div",7),a(18,"div",10)(19,"a",11),r(20),m(21,"translate"),o(),a(22,"button",12),r(23),m(24,"translate"),d(25,j,1,0,"span",13),o()()()()),t&2){let s,g;i(),x("formGroup",n.loginForm),i(2),c(p(4,10,"LOGIN.TITLE")),i(2),u(n.messageErorr?5:-1),i(3),c(p(9,12,"LOGIN.EMAIL")),i(3),u((s=n.loginForm.get("email"))!=null&&s.errors&&((s=n.loginForm.get("email"))!=null&&s.touched||(s=n.loginForm.get("email"))!=null&&s.dirty)?11:-1),i(3),c(p(15,14,"LOGIN.PASSWORD")),i(3),u((g=n.loginForm.get("password"))!=null&&g.errors&&((g=n.loginForm.get("password"))!=null&&g.touched||(g=n.loginForm.get("password"))!=null&&g.dirty)?17:-1),i(3),c(p(21,16,"LOGIN.FORGET_PASSWORD")),i(3),_(" ",p(24,18,"LOGIN.BUTTON")," "),i(2),u(n.isLoading?25:-1)}},dependencies:[w,G,b,A,R,y,O,I,T,N],encapsulation:2})};export{B as LoginComponent};
